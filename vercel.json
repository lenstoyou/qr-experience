{
  "version": 2,
  "builds": [
    { "src": "api/index.js",           "use": "@vercel/node"   },
    { "src": "web/frontend/dist/**",   "use": "@vercel/static" }
  ],
  "routes": [
    // 1) any /api/* â†’ your Express app
    { "src": "/api/(.*)",       "dest": "/api/index.js" },

    // 2) Shopify webhooks (POST /webhook/orders/create) also into Express
    { "src": "/webhook/(.*)",   "dest": "/api/index.js" },

    // 3) real static assets (any path with an extension) directly from dist
    { "src": "/(.*\\..+)$",     "dest": "/web/frontend/dist/$1" },

    // 4) EVERYTHING ELSE falls back to index.html
    { "src": "/(.*)",           "dest": "/web/frontend/dist/index.html" }
  ]
}